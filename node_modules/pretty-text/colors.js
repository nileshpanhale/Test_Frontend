"use strict";
const colorMap = require('./colorMap.js');
const emojiMap = require('./emojiMap.js');

let styles = {};

for (let codeName in colorMap) {
  let code = colorMap[codeName];
  styles[codeName] = {
    s: `\u001b[${code[0]}m`,
    e: `\u001b[${code[1]}m`
  };
}

function addDecorator(name, func) {
  String.prototype.__defineGetter__(name, func);
}

addDecorator('strip', function () {
  return this.replace(/\x1B\[\d+m/g, '');
});
addDecorator('emojify', function () {
  let ret = this;
  let matches = ret.match(/(:[^:]+:)/g);
  matches.forEach(match => {
    ret = ret.replace(match, emojiMap[match.substr(1, match.length - 2)] || match);
  });
  return ret;
});

for (let styleName in styles) {
  addDecorator(styleName, function () {
    return `${styles[styleName].s}${this}${styles[styleName].e}`;
  });
}

exports.addDecorator = addDecorator;
